using System.Collections;using System.Collections.Generic;using System.Threading.Tasks;using UnityEngine;using UnityEngine.InputSystem;using UnityEngine.UI;using UnityEngine.SceneManagement;using UIM;using UIM.Input;public class UIM_PauseManager : Singleton<UIM_PauseManager>{        public GameObject pausePanel;    public bool isPause;        private async void OnEnable()    {        await Task.Yield();        pausePanel.SetActive(false);        isPause = false;            var inputAction = UIM_InputSystem.GetPlayerInput()?.actions["Pause"];        if (inputAction != null)        {            inputAction.performed += SwitchOnPause;           // Debug.Log("已监听暂停");        }        else        {            Debug.LogWarning("Pause action not found in input system");            // Consider adding a coroutine to retry after a delay        }    }    private void OnDisable()    {        UIM_InputSystem.GetPlayerInput().actions["Pause"].performed -= SwitchOnPause;    }    public void SwitchOnPause(InputAction.CallbackContext context)    {        if (isPause==false)        {            OnPause();        }                        /*        if (isPause)        {            OnReback();        }        else        {            OnPause();        }        */                            }                public void OnPause(  )    {        if (pausePanel.activeInHierarchy) return;        isPause = true;        //Time.timeScale = 0f;        PanelHide();    }    public void OnReback()    {        if (!pausePanel.activeInHierarchy) return;        isPause = false;        //Time.timeScale = 1f;        PanelHide();        UIM_DebugManager.Log("返回游戏中","成功","UI");    }    public void OnRestart()    {        UIM_DebugManager.Log("重新加载游戏", "成功", "UI");        //Time.timeScale = 1f;        PanelHide();        // 获取当前场景的名称        string sceneName = SceneManager.GetActiveScene().name;        // 重新加载当前场景        SceneManager.LoadScene(sceneName);    }    public void PanelHide()    {        UIM_UIManager.SwitchPanel(pausePanel);    }}