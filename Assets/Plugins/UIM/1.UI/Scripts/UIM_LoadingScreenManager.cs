using UnityEngine;using UnityEngine.SceneManagement;using UnityEngine.UI;using System.Collections;using System.Collections.Generic;using TMPro;using System;using Sirenix.OdinInspector;public class UIM_LoadingScreenManager : MonoBehaviour{    [LabelText("目标场景名称")]    public string targetSceneName; // 目标场景名称    public Slider progressBar; // UI进度条    public float minSecond, maxSecond; //设立最小最大值，每次加载固定时间多一些    private float second;    private float currenttime;    private bool islock;    private void Start()    {              second = UnityEngine.Random.Range(minSecond, maxSecond);        currenttime = 0;        islock = false;    }    public void Update()    {        if (islock) return;        currenttime += Time.deltaTime;        progressBar.value = currenttime / second*0.5f;        if (currenttime >= second)        {            StartCoroutine(LoadTargetSceneAsync());            islock = true;        }    }    private IEnumerator LoadTargetSceneAsync()    {                // 开始异步加载目标场景        AsyncOperation asyncOperation = SceneManager.LoadSceneAsync(targetSceneName);        // 禁用自动场景切换        asyncOperation.allowSceneActivation = false;        // 更新UI进度条        while (!asyncOperation.isDone)        {            // 进度条的值 [0, 1]            progressBar.value = 0.5f+asyncOperation.progress*0.5f;            // 检查是否加载完成            if (asyncOperation.progress >= 0.9f)            {                // 加载完成，允许场景切换                asyncOperation.allowSceneActivation = true;            }            yield return null;        }    }}